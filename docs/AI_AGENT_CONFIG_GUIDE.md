# AI Agent é…ç½®æŒ‡å— - XMLç¼–è¾‘å™¨å·¥ä½œæµ

## ğŸ¯ æ ¸å¿ƒç›®æ ‡

AI Agent çš„ä½œç”¨æ˜¯**é¢„å¤„ç†XMLæ•°æ®**ï¼Œä¸ºåç»­çš„ `analyze_xml_structure` èŠ‚ç‚¹æä¾›æ›´æ™ºèƒ½çš„åˆ†æç»“æœã€‚

---

## ğŸ“ AI Agent é…ç½®ï¼ˆç®€æ´ç‰ˆï¼‰

### ç³»ç»Ÿæç¤ºè¯ï¼ˆSystem Promptï¼‰

```
ä½ æ˜¯XMLæ•°æ®ç»“æ„åˆ†æä¸“å®¶ã€‚åˆ†æXMLæ•°æ®ï¼Œè¯†åˆ«æšä¸¾å€¼ã€å¸ƒå°”å€¼ã€æ•°å€¼èŒƒå›´å’Œå­—æ®µå…³è”å…³ç³»ã€‚åªè¿”å›JSONæ ¼å¼ç»“æœï¼Œä¸è¦è§£é‡Šæ€§æ–‡å­—ã€‚
```

### ä»»åŠ¡ç›®æ ‡ï¼ˆGoalï¼‰

```
åˆ†æXMLæ•°æ®ï¼Œæå–ä»¥ä¸‹ä¿¡æ¯å¹¶ä»¥JSONæ ¼å¼è¿”å›ï¼š
1. æšä¸¾å­—æ®µåŠå…¶æ‰€æœ‰å¯èƒ½å€¼
2. å¸ƒå°”å€¼å­—æ®µåˆ—è¡¨
3. æ•°å€¼å­—æ®µçš„èŒƒå›´ï¼ˆmin/max/defaultï¼‰
4. å­—æ®µå…³è”å…³ç³»
5. å¿…å¡«/å¯é€‰å­—æ®µ
```

---

## ğŸ”§ è¯¦ç»†é…ç½®

### ç³»ç»Ÿæç¤ºè¯ï¼ˆæ¨èï¼‰

```
ä½ æ˜¯XMLæ•°æ®ç»“æ„åˆ†æä¸“å®¶ã€‚ä¸“æ³¨äºè¯†åˆ«æšä¸¾å€¼ã€å¸ƒå°”å€¼ã€æ•°å€¼èŒƒå›´å’Œå­—æ®µå…³è”å…³ç³»ã€‚è¾“å‡ºå¿…é¡»æ˜¯çº¯JSONæ ¼å¼ï¼Œä¸è¦åŒ…å«ä»»ä½•è§£é‡Šæ€§æ–‡å­—ã€‚
```

**è¦ç‚¹**ï¼š
- âœ… æ˜ç¡®è§’è‰²ï¼šXMLæ•°æ®ç»“æ„åˆ†æä¸“å®¶
- âœ… æ˜ç¡®ä»»åŠ¡ï¼šè¯†åˆ«æšä¸¾ã€å¸ƒå°”ã€æ•°å€¼ã€å…³è”
- âœ… æ˜ç¡®æ ¼å¼ï¼šçº¯JSONï¼Œä¸è¦è§£é‡Š

### ä»»åŠ¡ç›®æ ‡ï¼ˆGoalï¼‰

```
åˆ†æè¾“å…¥çš„XMLæ•°æ®ï¼Œæå–ä»¥ä¸‹ä¿¡æ¯å¹¶ä»¥JSONæ ¼å¼è¿”å›ï¼š

{
  "enum_fields": {"å­—æ®µå": ["å€¼1", "å€¼2", ...]},
  "boolean_fields": ["å­—æ®µ1", "å­—æ®µ2", ...],
  "numeric_ranges": {"å­—æ®µå": {"min": 0, "max": 10, "default": 5}},
  "field_relationships": [{"field1": "å­—æ®µ1", "field2": "å­—æ®µ2", "relation_type": "å¯¹åº”", "relation_rules": {...}}],
  "required_fields": ["id", "name", ...],
  "optional_fields": ["field1", ...],
  "validation_rules": {"å­—æ®µå": {"è§„åˆ™ç±»å‹": "è§„åˆ™å€¼"}},
  "edit_suggestions": {"å­—æ®µå": {"default": "é»˜è®¤å€¼", "tooltip": "æç¤º"}},
  "structure": "ç»“æ„æè¿°",
  "fields": [{"name": "å­—æ®µå", "type": "enum|boolean|number|string", ...}],
  "edit_paths": ["Items.Item"]
}
```

**è¦ç‚¹**ï¼š
- âœ… æ˜ç¡®è¾“å‡ºæ ¼å¼ï¼šJSON
- âœ… æ˜ç¡®å­—æ®µç»“æ„ï¼šç›´æ¥ç»™å‡ºJSONæ¨¡æ¿
- âœ… ä¸è¦é•¿ç¯‡å¤§è®ºï¼šåªè¿”å›JSON

---

## ğŸ’¬ å¦‚ä½•æé—®ï¼ˆUser Promptæ ¼å¼ï¼‰

AI Agent ä¼šè‡ªåŠ¨æ¥æ”¶ä¸Šæ¸¸èŠ‚ç‚¹çš„æ•°æ®ï¼Œä½†ä½ å¯ä»¥é€šè¿‡ `goal` å­—æ®µæ˜ç¡®è¦æ±‚ï¼š

### ç®€æ´æé—®æ ¼å¼

```
åˆ†æä»¥ä¸‹XMLæ•°æ®ï¼Œæå–æšä¸¾å€¼ã€å¸ƒå°”å€¼ã€æ•°å€¼èŒƒå›´å’Œå­—æ®µå…³è”å…³ç³»ã€‚åªè¿”å›JSONæ ¼å¼ç»“æœã€‚

æ•°æ®ï¼š
${INPUT_DATA}
```

### å¸¦ä¸šåŠ¡èƒŒæ™¯çš„æé—®ï¼ˆæ¨èï¼‰

```
è¿™æ˜¯æ¸¸æˆè£…å¤‡é…ç½®XMLã€‚åˆ†ææ•°æ®ï¼Œæå–ï¼š
1. æšä¸¾å­—æ®µï¼šä»æ•°æ®ä¸­æå–æ‰€æœ‰å”¯ä¸€å€¼ï¼ˆå¦‚Typeã€cultureç­‰ï¼‰
2. å¸ƒå°”å€¼å­—æ®µï¼šè¯†åˆ«æ‰€æœ‰"true"/"false"å­—ç¬¦ä¸²å­—æ®µ
3. æ•°å€¼èŒƒå›´ï¼šè®¡ç®—å®é™…æ•°æ®çš„min/max/default
4. å­—æ®µå…³è”ï¼šè¯†åˆ«å­—æ®µé—´çš„å¯¹åº”å…³ç³»

åªè¿”å›JSONæ ¼å¼ï¼Œä¸è¦è§£é‡Šã€‚

æ•°æ®ï¼š
${INPUT_DATA}
```

---

## ğŸ“‹ è¾“å‡ºæ ¼å¼è¦æ±‚

### å¿…é¡»è¿”å›çš„JSONç»“æ„

```json
{
  "enum_fields": {
    "Type": ["HandArmor", "BodyArmor", "LegArmor"],
    "culture": ["Culture.aserai", "Culture.neutral_culture", "Culture.khuzait"]
  },
  "boolean_fields": ["Civilian", "Stealth", "is_merchandise", "covers_hands"],
  "numeric_ranges": {
    "weight": {"min": 0.1, "max": 4.2, "default": 1.5, "typical": 1.2},
    "arm_armor": {"min": 0, "max": 50, "default": 10, "typical": 15}
  },
  "field_relationships": [
    {
      "field1": "modifier_group",
      "field2": "material_type",
      "relation_type": "å¯¹åº”",
      "relation_rules": {"leather": "Leather", "plate": "Plate", "cloth": "Cloth"}
    }
  ],
  "required_fields": ["id", "name", "Type"],
  "optional_fields": ["is_merchandise", "difficulty"],
  "validation_rules": {
    "weight": {"type": "range", "min": 0.1, "max": 10},
    "id": {"type": "required", "pattern": "^[a-z_]+$"}
  },
  "edit_suggestions": {
    "Type": {"default": "HandArmor", "tooltip": "è£…å¤‡ç±»å‹"},
    "weight": {"default": 1.0, "tooltip": "è£…å¤‡é‡é‡"}
  },
  "structure": "Itemsæ ¹èŠ‚ç‚¹åŒ…å«å¤šä¸ªItemå­èŠ‚ç‚¹ï¼Œæ¯ä¸ªItemåŒ…å«åŸºç¡€å±æ€§å’ŒåµŒå¥—çš„ItemComponent",
  "fields": [
    {"name": "Type", "type": "enum", "path": "@attributes.Type"},
    {"name": "weight", "type": "number", "path": "@attributes.weight"},
    {"name": "Civilian", "type": "boolean", "path": "Flags.@attributes.Civilian"}
  ],
  "edit_paths": ["Items.Item"]
}
```

### å…³é”®å­—æ®µè¯´æ˜

| å­—æ®µ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `enum_fields` | æšä¸¾å­—æ®µåŠå…¶æ‰€æœ‰å¯èƒ½å€¼ | `{"Type": ["HandArmor", "BodyArmor"]}` |
| `boolean_fields` | å¸ƒå°”å€¼å­—æ®µåˆ—è¡¨ | `["Civilian", "Stealth"]` |
| `numeric_ranges` | æ•°å€¼èŒƒå›´ï¼ˆåŸºäºå®é™…æ•°æ®è®¡ç®—ï¼‰ | `{"weight": {"min": 0.1, "max": 4.2}}` |
| `field_relationships` | å­—æ®µå…³è”å…³ç³» | `[{"field1": "modifier_group", "field2": "material_type", ...}]` |
| `required_fields` | å¿…å¡«å­—æ®µ | `["id", "name"]` |
| `optional_fields` | å¯é€‰å­—æ®µ | `["is_merchandise"]` |
| `edit_paths` | å¯ç¼–è¾‘çš„æ•°æ®è·¯å¾„ | `["Items.Item"]` |

---

## âš ï¸ å…³é”®è¦æ±‚

### 1. è¾“å‡ºæ ¼å¼
- âœ… **å¿…é¡»**ï¼šçº¯JSONæ ¼å¼
- âŒ **ç¦æ­¢**ï¼šè§£é‡Šæ€§æ–‡å­—ã€Markdownä»£ç å—ã€å¤šä½™è¯´æ˜

### 2. æšä¸¾å€¼æå–
- âœ… **å¿…é¡»**ï¼šä»æ•°æ®ä¸­æå–**æ‰€æœ‰å”¯ä¸€å€¼**ï¼Œä¸è¦é—æ¼
- âœ… **å¿…é¡»**ï¼šå³ä½¿å­—æ®µçœ‹èµ·æ¥æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿè¦åˆ¤æ–­æ˜¯å¦ä¸ºæšä¸¾

### 3. å¸ƒå°”å€¼è¯†åˆ«
- âœ… **å¿…é¡»**ï¼šè¯†åˆ«æ‰€æœ‰ `"true"`/`"false"` å­—ç¬¦ä¸²å­—æ®µä¸ºå¸ƒå°”ç±»å‹
- âŒ **ç¦æ­¢**ï¼šä¸è¦å°†å¸ƒå°”å€¼å­—æ®µè¯†åˆ«ä¸ºå­—ç¬¦ä¸²

### 4. æ•°å€¼èŒƒå›´
- âœ… **å¿…é¡»**ï¼šåŸºäºå®é™…æ•°æ®è®¡ç®— min/maxï¼Œä¸è¦çŒœæµ‹
- âœ… **å¿…é¡»**ï¼šæä¾› default å’Œ typical å€¼

### 5. å­—æ®µç±»å‹
- âœ… **å¿…é¡»**ï¼šå‡†ç¡®è¯†åˆ«ç±»å‹ï¼ˆenum, boolean, number, stringï¼‰
- âŒ **ç¦æ­¢**ï¼šæ¨¡ç³Šçš„ç±»å‹åˆ¤æ–­

---

## ğŸ¯ å®Œæ•´é…ç½®ç¤ºä¾‹

### AI Agent èŠ‚ç‚¹é…ç½®

```
ç³»ç»Ÿæç¤ºè¯ï¼š
ä½ æ˜¯XMLæ•°æ®ç»“æ„åˆ†æä¸“å®¶ã€‚åˆ†æXMLæ•°æ®ï¼Œè¯†åˆ«æšä¸¾å€¼ã€å¸ƒå°”å€¼ã€æ•°å€¼èŒƒå›´å’Œå­—æ®µå…³è”å…³ç³»ã€‚åªè¿”å›JSONæ ¼å¼ç»“æœï¼Œä¸è¦è§£é‡Šæ€§æ–‡å­—ã€‚

ä»»åŠ¡ç›®æ ‡ï¼š
åˆ†æXMLæ•°æ®ï¼Œæå–ä»¥ä¸‹ä¿¡æ¯å¹¶ä»¥JSONæ ¼å¼è¿”å›ï¼š
1. enum_fields: {å­—æ®µå: [æ‰€æœ‰å¯èƒ½å€¼åˆ—è¡¨]}
2. boolean_fields: [å¸ƒå°”å€¼å­—æ®µåˆ—è¡¨]
3. numeric_ranges: {å­—æ®µå: {min, max, default, typical}}
4. field_relationships: [{field1, field2, relation_type, relation_rules}]
5. required_fields: [å¿…å¡«å­—æ®µåˆ—è¡¨]
6. optional_fields: [å¯é€‰å­—æ®µåˆ—è¡¨]
7. validation_rules: {å­—æ®µå: {è§„åˆ™ç±»å‹, è§„åˆ™å€¼}}
8. edit_suggestions: {å­—æ®µå: {default, tooltip}}
9. structure: ç»“æ„æè¿°
10. fields: [{name, type, path}]
11. edit_paths: [å¯ç¼–è¾‘è·¯å¾„]

åªè¿”å›JSONï¼Œä¸è¦å…¶ä»–å†…å®¹ã€‚

Temperature: 0.3ï¼ˆé™ä½éšæœºæ€§ï¼Œæé«˜å‡†ç¡®æ€§ï¼‰
```

---

## ğŸ”— å·¥ä½œæµè¿æ¥

```
[è§£ææ–‡ä»¶] â†’ [AI Agent] â†’ [analyze_xml_structure] â†’ [generate_editor_config]
            â†“
      [ChatGPT/Gemini/DeepSeek]
```

### è¿æ¥è¯´æ˜

1. **è§£ææ–‡ä»¶** â†’ **AI Agent**ï¼ˆinputç«¯å£ï¼‰
2. **ChatGPT/Gemini/DeepSeek** â†’ **AI Agent**ï¼ˆchat_modelç«¯å£ï¼Œåº•éƒ¨å·¦ä¾§ï¼‰
3. **AI Agent** â†’ **analyze_xml_structure**ï¼ˆoutputç«¯å£ï¼‰

---

## âœ… éªŒè¯è¾“å‡º

æ‰§è¡ŒAI Agentåï¼Œæ£€æŸ¥OUTPUTçš„JSONæ˜¯å¦åŒ…å«ï¼š
- âœ… `enum_fields` ä¸ä¸ºç©º
- âœ… `boolean_fields` ä¸ä¸ºç©º
- âœ… `numeric_ranges` åŸºäºå®é™…æ•°æ®
- âœ… `field_relationships` è¯†åˆ«äº†å…³è”å…³ç³»
- âœ… æ ¼å¼ä¸ºçº¯JSONï¼Œæ— è§£é‡Šæ€§æ–‡å­—

---

## ğŸ’¡ æç¤º

- **Temperature**: å»ºè®®è®¾ç½®ä¸º **0.3-0.5**ï¼ˆé™ä½éšæœºæ€§ï¼Œæé«˜å‡†ç¡®æ€§ï¼‰
- **è¾“å‡ºæ ¼å¼**: åœ¨ `goal` ä¸­æ˜ç¡®è¦æ±‚"åªè¿”å›JSONï¼Œä¸è¦è§£é‡Š"
- **ä¸šåŠ¡èƒŒæ™¯**: å¯åœ¨ `goal` ä¸­æ·»åŠ ä¸šåŠ¡èƒŒæ™¯ï¼Œå¸®åŠ©AIæ›´å‡†ç¡®è¯†åˆ«å­—æ®µç±»å‹

