# StructForge AI - æ™ºèƒ½XMLç¼–è¾‘å™¨å·¥ä½œæµè®¾è®¡æ–¹æ¡ˆ

## ğŸ“‹ ç›®æ ‡

åŸºäº `SkiOL_arm_armors.xml`ï¼ˆéª‘é©¬ä¸ç æ€2æ‰‹è‡‚é“ ç”²ï¼‰çš„XMLç»“æ„ï¼Œè®¾è®¡ä¸€ä¸ª**æ™ºèƒ½ã€é€šç”¨ã€æ˜“ç”¨**çš„XMLç¼–è¾‘å·¥å…·å·¥ä½œæµï¼Œèƒ½å¤Ÿï¼š
1. è‡ªåŠ¨è¯†åˆ«ä»»æ„XMLæ–‡ä»¶çš„ç»“æ„
2. é€šè¿‡AIåˆ†æç†è§£å­—æ®µå«ä¹‰å’Œä¸šåŠ¡é€»è¾‘
3. ç”Ÿæˆé€‚åˆçš„ç¼–è¾‘å™¨é…ç½®
4. æ”¯æŒåˆ›å»ºã€ç¼–è¾‘ã€ä¿®æ”¹ã€ä¿å­˜ã€åˆ é™¤æ“ä½œ
5. å¯¹ä¸åŒXMLæ ¼å¼è‡ªåŠ¨é€‚é…

---

## ğŸ” XMLç»“æ„åˆ†æ

### æ–‡ä»¶ç»“æ„
```xml
<Items>
  <Item id="..." name="..." mesh="..." culture="..." weight="..." Type="HandArmor">
    <ItemComponent>
      <Armor arm_armor="..." modifier_group="..." material_type="..." />
    </ItemComponent>
    <Flags Civilian="true" Stealth="true" />
  </Item>
  <!-- å¤šä¸ªItem -->
</Items>
```

### å…³é”®å­—æ®µè¯†åˆ«
- **Itemå±æ€§**ï¼šid, name, mesh, culture, weight, difficulty, appearance, Type, is_merchandise
- **åµŒå¥—ç»“æ„**ï¼šItemComponent â†’ Armorï¼ˆarm_armor, modifier_group, material_type, covers_hands, stealth_factorï¼‰
- **FlagsèŠ‚ç‚¹**ï¼šå¸ƒå°”å±æ€§ï¼ˆCivilian, Stealthç­‰ï¼‰

---

## ğŸ¯ å®Œæ•´å·¥ä½œæµè®¾è®¡

### æ ¸å¿ƒå·¥ä½œæµï¼ˆæ¨èï¼‰

```mermaid
graph LR
    A[parse_file<br/>è§£æXMLæ–‡ä»¶] -->|æ•°æ®+Schema| B[analyze_xml_structure<br/>AIåˆ†æXMLç»“æ„<br/>ğŸ¤–]
    B -->|ç»“æ„åˆ†æç»“æœ| C[generate_editor_config<br/>ç”Ÿæˆç¼–è¾‘å™¨é…ç½®<br/>ğŸ¤–]
    C -->|ç¼–è¾‘å™¨é…ç½®| D[æ™ºèƒ½ç¼–è¾‘ç•Œé¢<br/>åŸºäºé…ç½®]
    D -->|ç¼–è¾‘æ“ä½œ| E[edit_data<br/>ç¼–è¾‘æ•°æ®<br/>åˆ›å»º/æ›´æ–°/åˆ é™¤]
    E -->|éªŒè¯å‰| F[validate_data<br/>éªŒè¯æ•°æ®]
    F -->|éªŒè¯é€šè¿‡| G[export_file<br/>å¯¼å‡ºXMLæ–‡ä»¶]
    
    style A fill:#1890ff
    style B fill:#722ed1
    style C fill:#722ed1
    style E fill:#13c2c2
    style F fill:#faad14
    style G fill:#eb2f96
```

### æ‰©å±•å·¥ä½œæµï¼ˆæ”¯æŒæ›´å¤šæ“ä½œï¼‰

```mermaid
graph TB
    A[parse_file] -->|æ•°æ®| B[analyze_xml_structure]
    B -->|ç»“æ„åˆ†æ| C[generate_editor_config]
    C -->|é…ç½®| D[ç¼–è¾‘å™¨ç•Œé¢]
    
    D -->|åˆ›å»º| E1[edit_data: create]
    D -->|æ›´æ–°| E2[edit_data: update]
    D -->|åˆ é™¤| E3[edit_data: delete]
    D -->|æ‰¹é‡ç¼–è¾‘| E4[smart_edit]
    D -->|è¿‡æ»¤æŸ¥çœ‹| F[filter_data]
    
    E1 --> V[validate_data]
    E2 --> V
    E3 --> V
    E4 --> V
    
    V -->|é€šè¿‡| G[export_file]
    F -->|ç­›é€‰ç»“æœ| D
```

---

## ğŸ“Š èŠ‚ç‚¹åŠŸèƒ½åˆ†æ

### âœ… å·²æœ‰èŠ‚ç‚¹ï¼ˆ12ä¸ªï¼‰

| èŠ‚ç‚¹ç±»å‹ | åŠŸèƒ½ | çŠ¶æ€ | éœ€è¦å®Œå–„ |
|---------|------|------|---------|
| **parse_file** | è§£æXMLæ–‡ä»¶ | âœ… å®Œæˆ | å¢å¼ºå¯¹å¤æ‚åµŒå¥—çš„æ”¯æŒ |
| **analyze_xml_structure** | AIåˆ†æXMLç»“æ„ | âœ… å®Œæˆ | éœ€è¦ç†è§£ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚Type="HandArmor"çš„å«ä¹‰ï¼‰ |
| **generate_editor_config** | ç”Ÿæˆç¼–è¾‘å™¨é…ç½® | âœ… å®Œæˆ | éœ€è¦ç”Ÿæˆæ›´æ™ºèƒ½çš„é…ç½®ï¼ˆä¸‹æ‹‰é€‰é¡¹ã€éªŒè¯è§„åˆ™ï¼‰ |
| **edit_data** | åˆ›å»º/æ›´æ–°/åˆ é™¤ | âœ… å®Œæˆ | éœ€è¦æ”¯æŒæ‰¹é‡æ“ä½œç•Œé¢ |
| **filter_data** | è¿‡æ»¤æ•°æ® | âœ… å®Œæˆ | éœ€è¦æ”¯æŒå¤æ‚æŸ¥è¯¢ç•Œé¢ |
| **validate_data** | éªŒè¯æ•°æ® | âœ… å®Œæˆ | éœ€è¦æ”¯æŒè‡ªå®šä¹‰éªŒè¯è§„åˆ™ |
| **smart_edit** | æ™ºèƒ½ç¼–è¾‘ | âœ… å®Œæˆ | éœ€è¦æ›´å¥½çš„ä¸Šä¸‹æ–‡ç†è§£ |
| **export_file** | å¯¼å‡ºæ–‡ä»¶ | âœ… å®Œæˆ | éœ€è¦æ”¯æŒXMLæ ¼å¼åŒ–å’Œç¾åŒ– |
| **analyze_schema** | åˆ†æSchema | âœ… å®Œæˆ | - |
| **process_natural_language** | è‡ªç„¶è¯­è¨€å¤„ç† | âœ… å®Œæˆ | - |
| **apply_operations** | åº”ç”¨æ“ä½œ | âœ… å®Œæˆ | - |
| **generate_workflow** | ç”Ÿæˆå·¥ä½œæµ | âœ… å®Œæˆ | - |

---

## ğŸš€ éœ€è¦å®Œå–„çš„èŠ‚ç‚¹åŠŸèƒ½

### 1. **analyze_xml_structure** - å¢å¼ºä¸šåŠ¡é€»è¾‘ç†è§£

**å½“å‰åŠŸèƒ½**ï¼šåˆ†æXMLç»“æ„å±‚æ¬¡å’Œå­—æ®µç±»å‹

**éœ€è¦å¢å¼º**ï¼š
- ç†è§£å­—æ®µçš„ä¸šåŠ¡å«ä¹‰ï¼ˆå¦‚ `Type="HandArmor"` è¡¨ç¤ºè¿™æ˜¯æ‰‹éƒ¨æŠ¤ç”²ï¼‰
- è¯†åˆ«å­—æ®µçš„æšä¸¾å€¼ï¼ˆå¦‚ `culture` çš„å¯èƒ½å€¼ï¼š`Culture.aserai`, `Culture.neutral_culture`ï¼‰
- è¯†åˆ«å­—æ®µçš„å–å€¼èŒƒå›´ï¼ˆå¦‚ `weight`, `arm_armor` çš„æ•°å€¼èŒƒå›´ï¼‰
- è¯†åˆ«å­—æ®µé—´çš„å…³è”å…³ç³»ï¼ˆå¦‚ `modifier_group` å’Œ `material_type` çš„å¯¹åº”å…³ç³»ï¼‰

**å®ç°å»ºè®®**ï¼š
```python
# åœ¨ ai_workflow.py çš„ analyze_xml_structure ä¸­å¢å¼ºæç¤ºè¯
prompt = f"""
è¯·æ·±å…¥åˆ†æä»¥ä¸‹XMLæ•°æ®ç»“æ„ï¼Œç‰¹åˆ«å…³æ³¨ï¼š

1. ä¸šåŠ¡é¢†åŸŸè¯†åˆ«ï¼šè¿™æ˜¯ä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼Ÿï¼ˆæ¸¸æˆè£…å¤‡ã€é…ç½®æ–‡ä»¶ç­‰ï¼‰
2. å­—æ®µæšä¸¾å€¼ï¼šè¯†åˆ«æ‰€æœ‰å¯èƒ½çš„æšä¸¾å€¼ï¼ˆå¦‚ culture, Type, modifier_groupï¼‰
3. æ•°å€¼èŒƒå›´ï¼šè¯†åˆ«æ•°å€¼å­—æ®µçš„åˆç†èŒƒå›´ï¼ˆå¦‚ weight, arm_armorï¼‰
4. å­—æ®µå…³è”ï¼šè¯†åˆ«å­—æ®µé—´çš„ä¸šåŠ¡å…³è”ï¼ˆå¦‚ material_type å’Œ modifier_group çš„å¯¹åº”å…³ç³»ï¼‰
5. å¿…å¡«å­—æ®µï¼šè¯†åˆ«å“ªäº›å­—æ®µæ˜¯å¿…éœ€çš„
6. ç¼–è¾‘å»ºè®®ï¼šä¸ºæ¯ä¸ªå­—æ®µæä¾›ç¼–è¾‘å»ºè®®ï¼ˆå¦‚é»˜è®¤å€¼ã€éªŒè¯è§„åˆ™ï¼‰

è¯·è¿”å›JSONæ ¼å¼ï¼ŒåŒ…å«ï¼š
- business_domain: ä¸šåŠ¡é¢†åŸŸ
- enum_fields: æšä¸¾å­—æ®µåŠå…¶å¯èƒ½å€¼
- numeric_ranges: æ•°å€¼å­—æ®µçš„èŒƒå›´
- field_relationships: å­—æ®µå…³è”å…³ç³»
- required_fields: å¿…å¡«å­—æ®µåˆ—è¡¨
- edit_suggestions: ç¼–è¾‘å»ºè®®
"""
```

### 2. **generate_editor_config** - ç”Ÿæˆæ›´æ™ºèƒ½çš„é…ç½®

**å½“å‰åŠŸèƒ½**ï¼šç”ŸæˆåŸºæœ¬çš„ç¼–è¾‘å™¨é…ç½®

**éœ€è¦å¢å¼º**ï¼š
- ä¸ºæšä¸¾å­—æ®µç”Ÿæˆä¸‹æ‹‰é€‰é¡¹ï¼ˆå¦‚ `culture`, `Type`, `modifier_group`, `material_type`ï¼‰
- ä¸ºæ•°å€¼å­—æ®µç”ŸæˆèŒƒå›´éªŒè¯ï¼ˆå¦‚ `weight`, `arm_armor`ï¼‰
- ä¸ºå¸ƒå°”å­—æ®µç”Ÿæˆå¼€å…³æ§ä»¶ï¼ˆå¦‚ `Flags.Civilian`, `Flags.Stealth`ï¼‰
- ä¸ºåµŒå¥—å­—æ®µç”Ÿæˆåˆ†ç»„å¸ƒå±€ï¼ˆå¦‚ `ItemComponent.Armor`ï¼‰
- ç”Ÿæˆå­—æ®µçš„é»˜è®¤å€¼å»ºè®®

**å®ç°å»ºè®®**ï¼š
```python
# åœ¨ generate_editor_config ä¸­åˆ©ç”¨ç»“æ„åˆ†æç»“æœ
prompt = f"""
æ ¹æ®ä»¥ä¸‹XMLç»“æ„åˆ†æç»“æœï¼Œç”Ÿæˆä¸€ä¸ªæ™ºèƒ½çš„ç¼–è¾‘å™¨é…ç½®ã€‚

ç»“æ„åˆ†æï¼š
{request.xml_structure}

ç‰¹åˆ«æ³¨æ„ï¼š
1. å¯¹äºæšä¸¾å­—æ®µï¼ˆå¦‚ culture, Typeï¼‰ï¼Œç”Ÿæˆä¸‹æ‹‰é€‰é¡¹åˆ—è¡¨
2. å¯¹äºæ•°å€¼å­—æ®µï¼ˆå¦‚ weight, arm_armorï¼‰ï¼Œç”ŸæˆèŒƒå›´éªŒè¯è§„åˆ™
3. å¯¹äºå¸ƒå°”å­—æ®µï¼ˆå¦‚ Flags.Civilianï¼‰ï¼Œç”Ÿæˆå¼€å…³æ§ä»¶
4. å¯¹äºåµŒå¥—ç»“æ„ï¼ˆå¦‚ ItemComponent.Armorï¼‰ï¼Œç”Ÿæˆåˆ†ç»„å¸ƒå±€
5. ä¸ºæ¯ä¸ªå­—æ®µæä¾›åˆç†çš„é»˜è®¤å€¼

è¯·è¿”å›JSONæ ¼å¼ï¼ŒåŒ…å«ï¼š
- fields: å­—æ®µé…ç½®ï¼ˆåŒ…å« options, validation, default ç­‰ï¼‰
- layout: UIå¸ƒå±€ï¼ˆåŒ…å« sections, groupsï¼‰
- operations: æ”¯æŒçš„æ“ä½œï¼ˆcreate, update, delete, batchï¼‰
- validation_rules: éªŒè¯è§„åˆ™
"""
```

### 3. **edit_data** - å¢å¼ºæ‰¹é‡æ“ä½œæ”¯æŒ

**å½“å‰åŠŸèƒ½**ï¼šæ”¯æŒåˆ›å»ºã€æ›´æ–°ã€åˆ é™¤å•ä¸ªæ¡ç›®

**éœ€è¦å¢å¼º**ï¼š
- æ‰¹é‡åˆ›å»ºï¼šæ”¯æŒä¸€æ¬¡åˆ›å»ºå¤šä¸ªItem
- æ‰¹é‡æ›´æ–°ï¼šæ”¯æŒæ‰¹é‡ä¿®æ”¹ç¬¦åˆæ¡ä»¶çš„å¤šä¸ªItem
- æ‰¹é‡åˆ é™¤ï¼šæ”¯æŒæ‰¹é‡åˆ é™¤ç¬¦åˆæ¡ä»¶çš„å¤šä¸ªItem
- æ“ä½œå†å²ï¼šè®°å½•æ“ä½œå†å²ï¼Œæ”¯æŒæ’¤é”€/é‡åš

**å®ç°å»ºè®®**ï¼š
```python
# åœ¨ data_operations.py ä¸­å¢å¼º edit ç«¯ç‚¹
@router.post("/edit")
async def edit_data(request: EditDataRequest):
    """
    æ”¯æŒæ‰¹é‡æ“ä½œ
    - operation="batch_create": item_data ä¸ºæ•°ç»„
    - operation="batch_update": filter_condition åŒ¹é…å¤šä¸ªï¼Œitem_data ä¸ºæ›´æ–°å†…å®¹
    - operation="batch_delete": filter_condition åŒ¹é…å¤šä¸ª
    """
    if request.operation == "batch_create":
        # æ‰¹é‡åˆ›å»º
        items = request.item_data if isinstance(request.item_data, list) else [request.item_data]
        # ...
    elif request.operation == "batch_update":
        # æ‰¹é‡æ›´æ–°
        # ...
```

### 4. **export_file** - å¢å¼ºXMLæ ¼å¼åŒ–

**å½“å‰åŠŸèƒ½**ï¼šå¯¼å‡ºæ–‡ä»¶

**éœ€è¦å¢å¼º**ï¼š
- XMLæ ¼å¼åŒ–ï¼šä¿æŒåŸå§‹æ ¼å¼ï¼ˆç¼©è¿›ã€æ¢è¡Œï¼‰
- XMLç¾åŒ–ï¼šç¾åŒ–è¾“å‡ºæ ¼å¼
- ä¿ç•™æ³¨é‡Šï¼šä¿ç•™XMLæ³¨é‡Š
- æ’åºé€‰é¡¹ï¼šæ”¯æŒæŒ‰å­—æ®µæ’åºè¾“å‡º

**å®ç°å»ºè®®**ï¼š
```python
# åœ¨ files.py æˆ–æ–°ç«¯ç‚¹ä¸­å®ç°
@router.post("/export")
async def export_file(request: ExportRequest):
    """
    - format: xml, json, yaml
    - pretty_print: æ˜¯å¦ç¾åŒ–
    - preserve_format: æ˜¯å¦ä¿æŒåŸå§‹æ ¼å¼
    - sort_by: æ’åºå­—æ®µ
    """
    if request.format == "xml":
        # ä½¿ç”¨ lxml ç¾åŒ–è¾“å‡º
        from lxml import etree
        root = etree.fromstring(xml_string)
        # æ ¼å¼åŒ–è¾“å‡º
        return etree.tostring(root, pretty_print=True, encoding='unicode')
```

### 5. **filter_data** - å¢å¼ºæŸ¥è¯¢ç•Œé¢

**å½“å‰åŠŸèƒ½**ï¼šæ ¹æ®æ¡ä»¶è¿‡æ»¤æ•°æ®

**éœ€è¦å¢å¼º**ï¼š
- å¯è§†åŒ–æŸ¥è¯¢æ„å»ºå™¨ï¼šæ”¯æŒå›¾å½¢åŒ–æ„å»ºæŸ¥è¯¢æ¡ä»¶
- å¤šæ¡ä»¶ç»„åˆï¼šæ”¯æŒ AND/OR é€»è¾‘
- ä¿å­˜æŸ¥è¯¢ï¼šä¿å­˜å¸¸ç”¨çš„æŸ¥è¯¢æ¡ä»¶
- æŸ¥è¯¢é¢„è§ˆï¼šå®æ—¶é¢„è§ˆæŸ¥è¯¢ç»“æœ

---

## ğŸ†• å¯èƒ½éœ€è¦çš„æ–°èŠ‚ç‚¹

### 1. **batch_operations** - æ‰¹é‡æ“ä½œèŠ‚ç‚¹ï¼ˆå¯é€‰ï¼‰

å¦‚æœ `edit_data` çš„æ‰¹é‡æ“ä½œä¸å¤Ÿå®Œå–„ï¼Œå¯ä»¥å•ç‹¬åˆ›å»ºï¼š

```typescript
// æ‰¹é‡æ“ä½œèŠ‚ç‚¹
type: 'batch_operations'
config: {
  operations: [
    { type: 'create', items: [...] },
    { type: 'update', filter: {...}, update: {...} },
    { type: 'delete', filter: {...} }
  ]
}
```

### 2. **preview_data** - æ•°æ®é¢„è§ˆèŠ‚ç‚¹ï¼ˆå¯é€‰ï¼‰

åœ¨ç¼–è¾‘å‰é¢„è§ˆæ•°æ®ï¼Œç¡®ä¿æ­£ç¡®ï¼š

```typescript
// æ•°æ®é¢„è§ˆèŠ‚ç‚¹
type: 'preview_data'
config: {
  preview_mode: 'table' | 'json' | 'form',
  limit: 10  // é¢„è§ˆæ•°é‡
}
```

### 3. **transform_data** - æ•°æ®è½¬æ¢èŠ‚ç‚¹ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦æ•°æ®æ ¼å¼è½¬æ¢ï¼š

```typescript
// æ•°æ®è½¬æ¢èŠ‚ç‚¹
type: 'transform_data'
config: {
  transform_rules: [
    { field: 'weight', operation: 'multiply', value: 1.1 },
    { field: 'arm_armor', operation: 'add', value: 5 }
  ]
}
```

---

## ğŸ“ å®Œæ•´å·¥ä½œæµå®ç°æ­¥éª¤

### é˜¶æ®µ1ï¼šåŸºç¡€å·¥ä½œæµï¼ˆå½“å‰å¯ç”¨ï¼‰

```
parse_file â†’ analyze_xml_structure â†’ generate_editor_config â†’ export_file
```

**åŠŸèƒ½**ï¼š
- âœ… è§£æXMLæ–‡ä»¶
- âœ… AIåˆ†æç»“æ„
- âœ… ç”Ÿæˆç¼–è¾‘å™¨é…ç½®
- âœ… å¯¼å‡ºé…ç½®ç»“æœ

### é˜¶æ®µ2ï¼šç¼–è¾‘å·¥ä½œæµï¼ˆå½“å‰å¯ç”¨ï¼Œéœ€å®Œå–„ï¼‰

```
parse_file â†’ analyze_xml_structure â†’ generate_editor_config 
â†’ edit_data (create/update/delete) â†’ validate_data â†’ export_file
```

**åŠŸèƒ½**ï¼š
- âœ… è§£æå’Œåˆ†æ
- âœ… ç”Ÿæˆé…ç½®
- âš ï¸ ç¼–è¾‘æ•°æ®ï¼ˆéœ€å¢å¼ºæ‰¹é‡æ“ä½œï¼‰
- âœ… éªŒè¯æ•°æ®
- âœ… å¯¼å‡ºç»“æœ

### é˜¶æ®µ3ï¼šæ™ºèƒ½ç¼–è¾‘å·¥ä½œæµï¼ˆå½“å‰å¯ç”¨ï¼‰

```
parse_file â†’ analyze_xml_structure â†’ generate_editor_config 
â†’ smart_edit (è‡ªç„¶è¯­è¨€ç¼–è¾‘) â†’ validate_data â†’ export_file
```

**åŠŸèƒ½**ï¼š
- âœ… è§£æå’Œåˆ†æ
- âœ… ç”Ÿæˆé…ç½®
- âœ… æ™ºèƒ½ç¼–è¾‘ï¼ˆè‡ªç„¶è¯­è¨€ï¼‰
- âœ… éªŒè¯å’Œå¯¼å‡º

### é˜¶æ®µ4ï¼šå®Œæ•´ç¼–è¾‘å™¨å·¥ä½œæµï¼ˆæ¨èå®ç°ï¼‰

```
parse_file 
  â†“
analyze_xml_structure (AIåˆ†æç»“æ„ï¼Œç†è§£ä¸šåŠ¡é€»è¾‘)
  â†“
generate_editor_config (ç”Ÿæˆæ™ºèƒ½ç¼–è¾‘å™¨é…ç½®ï¼ŒåŒ…å«æšä¸¾ã€éªŒè¯ã€å¸ƒå±€)
  â†“
[ç¼–è¾‘å™¨ç•Œé¢ - åŸºäºé…ç½®åŠ¨æ€ç”Ÿæˆ]
  â”œâ”€â†’ filter_data (æŒ‰æ¡ä»¶ç­›é€‰æŸ¥çœ‹)
  â”œâ”€â†’ edit_data (åˆ›å»º/æ›´æ–°/åˆ é™¤å•ä¸ªItem)
  â”œâ”€â†’ batch_operations (æ‰¹é‡æ“ä½œ)
  â””â”€â†’ smart_edit (è‡ªç„¶è¯­è¨€ç¼–è¾‘)
  â†“
validate_data (éªŒè¯æ•°æ®å®Œæ•´æ€§)
  â†“
export_file (å¯¼å‡ºç¾åŒ–åçš„XML)
```

---

## ğŸ¨ ç¼–è¾‘å™¨ç•Œé¢è®¾è®¡ï¼ˆåŸºäºç”Ÿæˆçš„é…ç½®ï¼‰

### åŠ¨æ€è¡¨å•ç”Ÿæˆ

æ ¹æ® `generate_editor_config` ç”Ÿæˆçš„é…ç½®ï¼ŒåŠ¨æ€ç”Ÿæˆç¼–è¾‘å™¨ç•Œé¢ï¼š

```typescript
// ç¤ºä¾‹ï¼šæ ¹æ®é…ç½®ç”Ÿæˆçš„è¡¨å•
{
  fields: [
    {
      name: "id",
      label: "ID",
      type: "text",
      required: true,
      validation: { pattern: "^[a-z_]+$" }
    },
    {
      name: "Type",
      label: "è£…å¤‡ç±»å‹",
      type: "select",
      options: ["HandArmor", "BodyArmor", "LegArmor"],
      default: "HandArmor"
    },
    {
      name: "weight",
      label: "é‡é‡",
      type: "number",
      validation: { min: 0, max: 10 },
      default: 1.0
    },
    {
      name: "ItemComponent.Armor.arm_armor",
      label: "æŠ¤ç”²å€¼",
      type: "number",
      validation: { min: 0, max: 100 },
      default: 10
    },
    {
      name: "Flags.Civilian",
      label: "æ°‘ç”¨è£…å¤‡",
      type: "switch",
      default: false
    }
  ],
  layout: {
    sections: [
      {
        title: "åŸºç¡€å±æ€§",
        fields: ["id", "name", "Type", "culture", "weight"]
      },
      {
        title: "æŠ¤ç”²å±æ€§",
        fields: ["ItemComponent.Armor.*"]
      },
      {
        title: "æ ‡å¿—",
        fields: ["Flags.*"]
      }
    ]
  }
}
```

---

## âœ… èŠ‚ç‚¹å®Œå–„æ¸…å•

### é«˜ä¼˜å…ˆçº§ï¼ˆå¿…é¡»å®Œå–„ï¼‰

1. **analyze_xml_structure**
   - [ ] è¯†åˆ«æšä¸¾å­—æ®µåŠå…¶å¯èƒ½å€¼
   - [ ] è¯†åˆ«æ•°å€¼å­—æ®µèŒƒå›´
   - [ ] è¯†åˆ«å­—æ®µå…³è”å…³ç³»
   - [ ] ç†è§£ä¸šåŠ¡é¢†åŸŸï¼ˆæ¸¸æˆè£…å¤‡ã€é…ç½®ç­‰ï¼‰

2. **generate_editor_config**
   - [ ] ä¸ºæšä¸¾å­—æ®µç”Ÿæˆä¸‹æ‹‰é€‰é¡¹
   - [ ] ä¸ºæ•°å€¼å­—æ®µç”ŸæˆèŒƒå›´éªŒè¯
   - [ ] ä¸ºåµŒå¥—å­—æ®µç”Ÿæˆåˆ†ç»„å¸ƒå±€
   - [ ] ç”Ÿæˆå­—æ®µé»˜è®¤å€¼å»ºè®®

3. **edit_data**
   - [ ] æ”¯æŒæ‰¹é‡åˆ›å»ºï¼ˆ`operation="batch_create"`ï¼‰
   - [ ] æ”¯æŒæ‰¹é‡æ›´æ–°ï¼ˆ`operation="batch_update"`ï¼‰
   - [ ] æ”¯æŒæ‰¹é‡åˆ é™¤ï¼ˆ`operation="batch_delete"`ï¼‰
   - [ ] æ”¹è¿›æ“ä½œç•Œé¢ï¼ˆè¡¨æ ¼å½¢å¼æ‰¹é‡ç¼–è¾‘ï¼‰

4. **export_file**
   - [ ] æ”¯æŒXMLæ ¼å¼åŒ–ï¼ˆä¿æŒåŸå§‹æ ¼å¼ï¼‰
   - [ ] æ”¯æŒXMLç¾åŒ–ï¼ˆç¾åŒ–è¾“å‡ºï¼‰
   - [ ] æ”¯æŒæ’åºé€‰é¡¹
   - [ ] ä¿ç•™XMLæ³¨é‡Š

### ä¸­ä¼˜å…ˆçº§ï¼ˆå»ºè®®å®Œå–„ï¼‰

5. **filter_data**
   - [ ] å¯è§†åŒ–æŸ¥è¯¢æ„å»ºå™¨
   - [ ] æ”¯æŒå¤šæ¡ä»¶ç»„åˆï¼ˆAND/ORï¼‰
   - [ ] ä¿å­˜å¸¸ç”¨æŸ¥è¯¢

6. **validate_data**
   - [ ] åŸºäºç»“æ„åˆ†æçš„è‡ªåŠ¨éªŒè¯è§„åˆ™
   - [ ] è‡ªå®šä¹‰éªŒè¯è§„åˆ™æ”¯æŒ
   - [ ] éªŒè¯ç»“æœå¯è§†åŒ–

7. **smart_edit**
   - [ ] æ›´å¥½çš„ä¸Šä¸‹æ–‡ç†è§£ï¼ˆåˆ©ç”¨ç»“æ„åˆ†æå’Œç¼–è¾‘å™¨é…ç½®ï¼‰
   - [ ] æ”¯æŒæ‰¹é‡è‡ªç„¶è¯­è¨€ç¼–è¾‘

### ä½ä¼˜å…ˆçº§ï¼ˆå¯é€‰ï¼‰

8. **æ–°å¢èŠ‚ç‚¹å»ºè®®**
   - [ ] `batch_operations` - ä¸“é—¨çš„æ‰¹é‡æ“ä½œèŠ‚ç‚¹
   - [ ] `preview_data` - æ•°æ®é¢„è§ˆèŠ‚ç‚¹
   - [ ] `transform_data` - æ•°æ®è½¬æ¢èŠ‚ç‚¹

---

## ğŸš€ å®ç°ä¼˜å…ˆçº§

### ç¬¬ä¸€é˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½å®Œå–„ï¼ˆç«‹å³å®ç°ï¼‰

1. âœ… å®Œå–„ `analyze_xml_structure` - å¢å¼ºä¸šåŠ¡é€»è¾‘ç†è§£
2. âœ… å®Œå–„ `generate_editor_config` - ç”Ÿæˆæ›´æ™ºèƒ½çš„é…ç½®
3. âœ… å®Œå–„ `edit_data` - æ”¯æŒæ‰¹é‡æ“ä½œ
4. âœ… å®Œå–„ `export_file` - XMLæ ¼å¼åŒ–

### ç¬¬äºŒé˜¶æ®µï¼šç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼ˆåç»­å®ç°ï¼‰

5. å®Œå–„ `filter_data` - å¯è§†åŒ–æŸ¥è¯¢
6. å®Œå–„ `validate_data` - è‡ªåŠ¨éªŒè¯è§„åˆ™
7. å®Œå–„ `smart_edit` - æ›´å¥½çš„ä¸Šä¸‹æ–‡ç†è§£

### ç¬¬ä¸‰é˜¶æ®µï¼šæ‰©å±•åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰

8. æ–°å¢ `batch_operations` èŠ‚ç‚¹
9. æ–°å¢ `preview_data` èŠ‚ç‚¹
10. æ–°å¢ `transform_data` èŠ‚ç‚¹

---

## ğŸ“Š å·¥ä½œæµç¤ºä¾‹

### ç¤ºä¾‹ï¼šç¼–è¾‘æ‰‹è‡‚é“ ç”²XML

```
1. parse_file (è§£æ SkiOL_arm_armors.xml)
   â†“ è¾“å‡ºï¼šè§£æåçš„æ•°æ® + Schema

2. analyze_xml_structure (AIåˆ†æ)
   â†“ è¾“å‡ºï¼š
   - ä¸šåŠ¡é¢†åŸŸï¼šæ¸¸æˆè£…å¤‡é…ç½®
   - æšä¸¾å­—æ®µï¼šType=["HandArmor"], culture=["Culture.aserai", "Culture.neutral_culture"]
   - æ•°å€¼èŒƒå›´ï¼šweight=[0.1-4.2], arm_armor=[6-24]
   - å­—æ®µå…³è”ï¼šmaterial_type å’Œ modifier_group å¯¹åº”å…³ç³»

3. generate_editor_config (ç”Ÿæˆé…ç½®)
   â†“ è¾“å‡ºï¼š
   - fields: æ‰€æœ‰å­—æ®µé…ç½®ï¼ˆåŒ…å«ä¸‹æ‹‰é€‰é¡¹ã€éªŒè¯è§„åˆ™ï¼‰
   - layout: åˆ†ç»„å¸ƒå±€ï¼ˆåŸºç¡€å±æ€§ã€æŠ¤ç”²å±æ€§ã€æ ‡å¿—ï¼‰
   - operations: [create, update, delete, batch]

4. [ç”¨æˆ·ä½¿ç”¨ç¼–è¾‘å™¨ç•Œé¢]
   - åˆ›å»ºæ–°Itemï¼šå¡«å†™è¡¨å•ï¼ˆè‡ªåŠ¨å¡«å……é»˜è®¤å€¼ï¼Œä¸‹æ‹‰é€‰é¡¹ï¼‰
   - æ›´æ–°Itemï¼šé€‰æ‹©Itemï¼Œä¿®æ”¹å­—æ®µ
   - åˆ é™¤Itemï¼šé€‰æ‹©Itemï¼Œåˆ é™¤
   - æ‰¹é‡æ“ä½œï¼šé€‰æ‹©å¤šä¸ªItemï¼Œæ‰¹é‡ä¿®æ”¹

5. validate_data (éªŒè¯)
   â†“ è¾“å‡ºï¼šéªŒè¯ç»“æœï¼ˆé”™è¯¯ã€è­¦å‘Šï¼‰

6. export_file (å¯¼å‡º)
   â†“ è¾“å‡ºï¼šæ ¼å¼åŒ–åçš„XMLæ–‡ä»¶
```

---

## ğŸ¯ å…³é”®æ”¹è¿›ç‚¹æ€»ç»“

1. **AIåˆ†æå¢å¼º**ï¼šè®©AIç†è§£XMLçš„ä¸šåŠ¡å«ä¹‰ï¼Œä¸ä»…ä»…æ˜¯ç»“æ„
2. **é…ç½®ç”Ÿæˆæ™ºèƒ½**ï¼šç”Ÿæˆçš„ç¼–è¾‘å™¨é…ç½®è¦åŒ…å«æšä¸¾ã€éªŒè¯ã€å¸ƒå±€ç­‰å®Œæ•´ä¿¡æ¯
3. **æ‰¹é‡æ“ä½œæ”¯æŒ**ï¼šæ”¯æŒé«˜æ•ˆçš„æ‰¹é‡ç¼–è¾‘æ“ä½œ
4. **XMLæ ¼å¼åŒ–**ï¼šå¯¼å‡ºæ—¶ä¿æŒæˆ–ç¾åŒ–XMLæ ¼å¼
5. **ç”¨æˆ·ä½“éªŒ**ï¼šæä¾›ç›´è§‚çš„ç¼–è¾‘ç•Œé¢ï¼ŒåŸºäºç”Ÿæˆçš„é…ç½®åŠ¨æ€ç”Ÿæˆ

---

**æœ€åæ›´æ–°**ï¼š2025-01-XX  
**è®¾è®¡ç‰ˆæœ¬**ï¼šv1.0.0

